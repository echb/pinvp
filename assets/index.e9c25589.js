import{c as X,r as f,a as K,p as x,o as Q,b as Y,d as D,e as d,f as T,g as u,i as R,u as Z,h as L,j as o,k as r,w as N,v as P,l as j,F as h,m as I,n as ee,q as B,s as F,t as V,x as A,y as U,z as M,A as te,B as se,C as oe,D as ae,V as ne}from"./vendor.04820244.js";const le=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}};le();const re="https://hjqmvcvoegzsbflhbzwn.supabase.co",ie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzODgyODA4OSwiZXhwIjoxOTU0NDA0MDg5fQ._0RTE97X6iFTNENysHX9WKibQqwrPTFE3GyeqVeGcuA",p=X(re,ie),w=f(""),O=f(""),S=f([]),$=f([]),q=async e=>{$.value=[],S.value=[];for(const a of e.target.files)S.value.push(URL.createObjectURL(a)),$.value.push(a)},ce=async()=>{await p.from("Movies").insert([{title:O.value,slug:w.value}])},ue=async()=>{for await(const e of $.value)await p.storage.from("assets").upload(`${w.value}/${e.name}`,e,{cacheControl:"3600",upsert:!1})},E=async()=>{await ce(),await ue(),setTimeout(()=>{$.value=[],S.value=[]},500)},C=f([]),de=async()=>{const{data:e}=await p.from("Movies").select("*");return e},pe=async()=>{const e=await de();C.value=e;for await(const a of C.value){a.pics=[],a.picsId=[];const{data:n}=await p.storage.from("assets").list(`${a.slug}`,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});for await(const i of n){const{signedURL:s}=await p.storage.from("assets").createSignedUrl(`${a.slug}/${i.name}`,60);a.pics.push(s),a.picsId.push(i.name)}}};let H=null;const me=()=>{H=p.from("Movies").on("INSERT",e=>{e.new&&fe(e.new.id)}).subscribe()},ge=()=>{p.removeSubscription(H)},fe=async e=>{let a=null;const{data:n}=await p.from("Movies").select("id, title, slug").eq("id",e);a=n;for await(const i of a){i.pics=[];const{data:s}=await p.storage.from("assets").list(`${i.slug}`,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});for await(const l of s){const{signedURL:m}=await p.storage.from("assets").createSignedUrl(`${i.slug}/${l.name}`,60);i.pics.push(m)}C.value.push(i)}},z=f("das"),_e=K({setSingleItemObject:e=>{z.value=e},updateHomeItem:e=>{console.log(e)}});const ve={setup(e){console.log("123");const n=f(C);return x("store",n),x("singleItem",z),Q(()=>{pe(),me()}),Y(()=>{ge()}),(i,s)=>{const l=D("router-view");return u(),d("div",null,[T(l)])}}},W=async()=>{const{user:e}=await p.auth.signIn({email:"example@email.com",password:"example-password"});console.log(e)},G=async()=>{const e=await p.auth.user();console.log(e)};var J=(e,a)=>{const n=e.__vccOpts||e;for(const[i,s]of a)n[i]=s;return n};const y=e=>(F("data-v-a1bb47d8"),e=e(),V(),e),ye=y(()=>o("br",null,null,-1)),be=y(()=>o("br",null,null,-1)),he=y(()=>o("br",null,null,-1)),Ie=y(()=>o("br",null,null,-1)),we=y(()=>o("br",null,null,-1)),Se=y(()=>o("button",{type:"submit"},"create full product",-1)),ke={key:0},Ue=M(" > "),Oe=["src"],$e=M(" /> "),Ce={key:0,class:"card-container"},De=["src"],xe={class:"text"},Te={key:1},Re={setup(e){let a=R("store");const n=()=>{console.log(a),console.log("asd")},i=Z(),s=L(),l=(v,c)=>{console.log(s);const g=s.query.redirect||"/edit/4";i.push(g),_e.setSingleItemObject(v),console.log(c)},m={rewind:!0,perPage:2,gap:"1rem",drag:!0,breakpoints:{1e3:{perPage:2}}};return(v,c)=>{const g=D("SplideSlide"),_=D("Splide");return u(),d("div",null,[o("p",{onClick:c[0]||(c[0]=(...t)=>r(W)&&r(W)(...t))},"login"),ye,o("p",{onClick:c[1]||(c[1]=(...t)=>r(G)&&r(G)(...t))},"user"),be,o("p",{onClick:n},"test"),o("p",{onClick:c[2]||(c[2]=(...t)=>v.selectSingleItemFilteredByID&&v.selectSingleItemFilteredByID(...t))},"selct single id"),he,Ie,we,o("form",{runat:"server",onSubmit:c[6]||(c[6]=B((...t)=>r(E)&&r(E)(...t),["prevent"]))},[N(o("input",{type:"text",name:"",id:"",placeholder:"title","onUpdate:modelValue":c[3]||(c[3]=t=>j(O)?O.value=t:null)},null,512),[[P,r(O)]]),N(o("input",{type:"text",name:"",id:"",placeholder:"slug","onUpdate:modelValue":c[4]||(c[4]=t=>j(w)?w.value=t:null)},null,512),[[P,r(w)]]),o("input",{onChange:c[5]||(c[5]=(...t)=>r(q)&&r(q)(...t)),accept:"image/*",type:"file",id:"imgInp",multiple:""},null,32),Se,r(S)?(u(),d("div",ke,[o("div",{options:m},[(u(!0),d(h,null,I(r(S),t=>(u(),d("div",{key:t.id},[Ue,o("img",{src:t,alt:""},null,8,Oe),$e]))),128))])])):ee("",!0)],32),r(a).length!=0?(u(),d("ul",Ce,[(u(!0),d(h,null,I(r(a),(t,b)=>(u(),d("div",{class:"card",key:t.id},[T(_,{options:m},{default:A(()=>[(u(!0),d(h,null,I(t.pics,k=>(u(),te(g,{onClick:He=>l(t,b),key:k},{default:A(()=>[(u(),d("img",{src:k,alt:"",key:k},null,8,De))]),_:2},1032,["onClick"]))),128))]),_:2},1024),o("p",xe,U(t.title),1)]))),128))])):(u(),d("p",Te,"agregar items"))])}}};var Le=J(Re,[["__scopeId","data-v-a1bb47d8"]]);const Ne=e=>(F("data-v-d4abc19c"),e=e(),V(),e),Pe={class:"card"},je=["onClick","src"],Be=["onSubmit"],Fe=["src"],Ve=Ne(()=>o("button",{type:"submit"},"create full product",-1)),Ae={setup(e){const a=L();console.log(a.params.id);let n=R("singleItem");const i=async(g,_)=>{},s=async()=>{const g=[],{data:_}=await p.storage.from("assets").list(`${n.value.slug}`,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});for await(const t of _){const{signedURL:b}=await p.storage.from("assets").createSignedUrl(`${n.value.slug}/${t.name}`,60);g.push(b)}n.value.pics=g},l=f([]),m=f([]),v=async g=>{m.value=[],l.value=[];for(const _ of g.target.files)l.value.push(URL.createObjectURL(_)),m.value.push(_)},c=async()=>{for await(const g of m.value)await p.storage.from("assets").upload(`${n.value.slug}/${g.name}`,g,{cacheControl:"3600",upsert:!1});s(),setTimeout(()=>{m.value=[],l.value=[]},500)};return(g,_)=>(u(),d("div",Pe,[o("p",null,U(r(n).title),1),o("p",null,U(r(n).slug),1),o("p",null,U(r(n).id),1),(u(!0),d(h,null,I(r(n).pics,(t,b)=>(u(),d("div",{key:t.id},[o("img",{onClick:k=>i(r(n).picsId[b]),src:t,alt:""},null,8,je)]))),128)),o("form",{runat:"server",onSubmit:B(c,["prevent"])},[o("input",{onChange:v,accept:"image/*",type:"file",id:"imgInp",multiple:""},null,32),o("ul",null,[(u(!0),d(h,null,I(l.value,t=>(u(),d("li",{key:t.id},[o("img",{src:t,alt:""},null,8,Fe)]))),128))]),Ve],40,Be)]))}};var Me=J(Ae,[["__scopeId","data-v-d4abc19c"]]);const qe=[{path:"/",name:"Home",component:Le},{path:"/edit/:id",name:"EditProduct",component:Me}],Ee=se({history:oe(),routes:qe});ae(ve).use(Ee).use(ne).mount("#app");
